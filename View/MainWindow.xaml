<Window x:Class="Infor_Soft_WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        Title="Dashboard - Sistema de Informes" Height="550" Width="950"
        WindowState="Maximized"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        WindowStyle="None" AllowsTransparency="True">

    <Window.Resources>
        <Style x:Key="MenuButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF582E04"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Height" Value="45"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="15" Padding="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Window.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#FF231300" Offset="0"/>
            <GradientStop Color="#FF582E04" Offset="1"/>
        </LinearGradientBrush>
    </Window.Background>

    <Border CornerRadius="25" BorderBrush="#D7CCC8" BorderThickness="2" Background="WhiteSmoke">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="SidebarColumn" Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- SIDEBAR -->
            <Border Grid.Column="0" Background="#FF3A1E03" Padding="0,30,0,0">
                <StackPanel>
                    <StackPanel Margin="20,0,20,40" HorizontalAlignment="Center">
                        <Image Source="/Imagenes/OS.png" Width="100" Height="100" />
                        <TextBlock x:Name="txtNombreUsuarioSidebar" Text="Bienvenido" FontSize="14" FontWeight="Bold" Foreground="White" Margin="0,10,0,0" HorizontalAlignment="Center"/>
                        <TextBlock x:Name="txtJuzgadoSidebar" Text="" FontSize="14" Foreground="White" HorizontalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Margin="10,0">
                        <Button Content="📄 Reportes" Style="{StaticResource MenuButtonStyle}" Tag="Reportes" Margin="10" Click="Reportes_Click"/>
                        <Button Content="💰 Registros Comisivos" Style="{StaticResource MenuButtonStyle}" Tag="Cobertura" Margin="10" Click="Cobertura_Click"/>
                        <Button Content="🧾 Facturación" Style="{StaticResource MenuButtonStyle}" Tag="Facturacion" Margin="10" Click="AbrirFactura_Click"/>
                        <Button Content="📂 Archivos" Click="AbrirBuscarInformes" Style="{StaticResource MenuButtonStyle}" Tag="Archivos" Margin="10"/>
                    </StackPanel>

                    <Button Content="🚪 Cerrar Sesión"
                            Margin="20,50,20,0"
                            FontWeight="Bold" Height="45"
                            Click="CerrarSesion_Click"
                            Cursor="Hand"
                            Background="#FF582E04" Foreground="White">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="15">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </Border>

            <!-- CONTENIDO -->
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="60"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- HEADER con botones ventana -->
                <DockPanel Grid.Row="0" Background="WhiteSmoke" LastChildFill="True">
                    <!-- Botón para esconder/mostrar el sidebar -->
                    <Button Content="☰"
                            Width="40" Height="30"
                            Click="ToggleSidebar_Click"
                            Background="Transparent"
                            BorderThickness="0"
                            FontSize="18"
                            ToolTip="Mostrar/Ocultar menú"
                            Cursor="Hand"/>

                    <!-- Título centrado -->
                    <TextBlock Text="Inforsoft"
                               FontSize="24" FontWeight="Bold"
                               Foreground="DarkGoldenrod"
                               Margin="20,0"
                               VerticalAlignment="Center"/>

                    <!-- Botones de ventana alineados a la derecha -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="🗕" Width="40" Height="30"
                                Click="Minimizar_Click"
                                Background="Transparent" BorderThickness="0" Cursor="Hand"/>
                        <Button Content="🗖" Width="40" Height="30"
                                Click="Maximizar_Click"
                                Background="Transparent" BorderThickness="0" Cursor="Hand"/>
                        <Button Content="❌" Width="40" Height="30"
                                Click="Cerrar_Click"
                                Background="Transparent" BorderThickness="0"
                                Foreground="Red" Cursor="Hand"/>
                    </StackPanel>
                </DockPanel>

                <!-- CONTENIDO PRINCIPAL CON GRÁFICO -->
                <Border Grid.Row="1" Margin="15" Background="White"
                        CornerRadius="20" Padding="20" BorderBrush="#FFC107" BorderThickness="2">

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- ComboBox de filtro 
                         <<StackPanel Orientation="Horizontal" Margin="0,0,0,10" Grid.Row="0">
                             <<TextBlock Text="Filtrar por:" VerticalAlignment="Center" Margin="0,0,10,0" />
                             <<ComboBox x:Name="cmbFiltro" Width="120" SelectionChanged="cmbFiltro_SelectionChanged">
                                 <<ComboBoxItem Content="Por Día"/>
                                 <<ComboBoxItem Content="Por Mes"/>
                                 <<ComboBoxItem Content="Por Año"/>
                             <</ComboBox>
                        <</StackPanel> -->

                        <!-- Gráfico ocupa todo el espacio -->
                        <lvc:CartesianChart x:Name="graficoInformes"
                                            Grid.Row="1"
                                            Series="{Binding SeriesCollection}"
                                            LegendLocation="Right"
                                            Background="White"
                                            Margin="0">
                            <lvc:CartesianChart.AxisX>
                                <lvc:Axis Title="Fecha" Labels="{Binding Labels}" />
                            </lvc:CartesianChart.AxisX>
                            <lvc:CartesianChart.AxisY>
                                <lvc:Axis Title="Cantidad" />
                            </lvc:CartesianChart.AxisY>
                        </lvc:CartesianChart>

                        <!-- Frame de navegación opcional -->
                        <Frame Grid.Row="1" x:Name="MainContentFrame" NavigationUIVisibility="Hidden" Margin="0,20,0,0"/>
                    </Grid>

                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
